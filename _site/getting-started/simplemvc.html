<!DOCTYPE html>
<html>

<head>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/global.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500,700' rel='stylesheet' type='text/css'>

<script src="/prism.js"></script>
<link href="/prism.css" rel="stylesheet">

</head>

<body data-spy="scroll" data-target=".bs-docs-sidebar">

	<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="/">Simpletools</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Getting started <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/getting-started/simplemvc.html">SimpleMVC</a></li>
            <li><a href="/getting-started/simplemysql.html">SimpleMySQL</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div ng-view id="content"><h1>Getting started with SimpleMVC</h1>

<div class="row">
  <div class="col-sm-9">
    
        <section id="introduction" class="group">
           
            <p class="subhead">SimpleMVC has been designed to provide you with all benefits of the Model-View-Controller software architectural pattern as well as high. It provides scalabiltiy, performance as well as ease of use out of box.</p>

            <div id="requirements" class="subgroup">
                <h3>Requirements</h3>
                <p>
                    SimpleMVC is compatible with PHP 5.* or higher however some new features such as routing namespacing requires namespacing support hence PHP 5.5.* or higher is required.
                </p>
            </div>
        </section>
        <section id="setup" class="group">
            <h2>Setup</h2>
            <p>SimpleMVC is very easy to setup, all you need is to include just 1 class into your project and setup your files structured in the organised way. Below we have demonstrated all you need to get your first app up and running with SimpleMVC.</p>
           
            <div id="directory" class="subgroup">
                <h3>Directory structure</h3>
                <p>
                    SimpleMVC requires a structural approach to your application directory thus making it highly organised and extremly easy to document and maintain.</p>
                <p>
                    Minimum required structure can be seen below:
                </p>

                <pre class="line-numbers">
<code class="language-bash">app/
    application/
        controllers/
            ErrorController.php
            IndexController.php
        models/
        views/
            Index/
                index.phtml
            Error/
                error.phtml
    libs/
        SimpleTools/
            SimpleMVC.php
    public/
        bootstrap.php</code></pre>

            </div>
        <div id="bootstrap" class="subgroup">
                <h3>Bootstrapping</h3>
                <p>Based on our initial application structure above bootsrapping happens inside the bootsrap.php file. The source of that file is very simple and can be seen below:</p>
                <pre class="line-numbers"><code class="language-php">&lt;?php
    //Including the main SimpleMVC framework library
    require_once('../libs/SimpleMVC.php'); 

    //Initiallising framework
    SimpleMVC::settings(array(
        'application_dir' => '../application'
    ));
?&gt;</code></pre>
            </div>
            <div id="index-handler" class="subgroup">
                <h3>Index handler</h3>
                <p>
                    To get homepage requestes percepted - localhost/ - we need IndexController and index view.
                </p>
                <p> 
                <b>IndexController.php</b> class can be seen below:
                </p>

                <pre class="line-numbers"><code class="language-php">&lt;?php
    class IndexController extends SimpleControl
    {
        public function indexAction()
        {

        }
    }
?&gt;</code></pre>

<p> 
                <b>index.phtml</b> view can be seen below:
                </p>

                <pre class="line-numbers"><code class="language-markup">&lthtml&gt;
    &ltbody&gt;Hello World!&lt/body&gt;
&lt/html&gt;</code></pre>

            </div>
            <div id="errors-handler" class="subgroup">
                <h3>Errors handler</h3>
                <p>
                    After having directory stucture, bootstrap index controller ready there is only 1 more thing needed before running our web 
                    server - error handler. Error handler will percept any requests routed to not existing actions or controllers.
                </p>
                <p> 
                <b>ErrorController.php</b> class can be seen below:
                </p>

                <pre class="line-numbers"><code class="language-php">&lt;?php
    class ErrorController extends SimpleControl
    {
        public function errorAction()
        {

        }
    }
?&gt;</code></pre>

<p> 
                <b>error.phtml</b> view can be seen below:
                </p>

                <pre class="line-numbers"><code class="language-markup">&lthtml&gt;
    &ltbody&gt;Error occured&lt/body&gt;
&lt/html&gt;</code></pre>

            </div>
             <div id="web-server-config" class="subgroup">
                <h3>Web server config</h3>
                <p>
                    At that stage we have all ready so can bootup our application. In the example below we have choosen apache as our web server. Here is a very basic virtual host definition. These rules direct all requests to index.php, except when a matching file is found under the DocumentRoot. 
                </p>

                <pre class="line-numbers"><code class="language-apacheconf">&ltVirtualHost my.domain.com:80&gt

    ServerName   my.domain.com
    DocumentRoot app/public

    &ltLocation /&gt
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} -s [OR]
        RewriteCond %{REQUEST_FILENAME} -l [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^.*$ - [NC,L]
        RewriteRule ^.*$ /bootstrap.php [NC,L]
    &lt/Location&gt

&lt/VirtualHost&gt</code></pre>
<p>
After placing the VirtualHost directive above inside your Apache config file and restarting the web server, assuming that all went right after typing in your browser my.domain.com - you should be able to see: <b>Hello World!</b> being displayed.
</p>
            </div>
            
        </section>

         <section id="routing" class="group">
            <h2>Routing</h2>
            <p>
                An integral part of any MVC framework and in SimpleMVC its built in so nothing to setup, all works out of box.
            </p>

            <p>
                Routing is responsible for forwarding requests into the appriopriate application controllers and their methods - called actions - so all handled as expected.
            </p>
           
            <div id="forwarding" class="subgroup">
                <h3>Forwarding</h3>
                 <p>
                SimpleMVC framework handles routing by looking at the request url and intercepting all as follow:

                <pre><code class="language-http">http://my.domain.com/{controller}/{action}</pre></code>

                <p>
                    So for the sake of an example lets us the following url:
                </p>
                <pre><code class="language-http">http://my.domain.com/user/login</pre></code>

                <p>
                    The following url results in SimpleMVC invoking UserController.php and triggering ->loginAction() method of that controller, hence the controller should looks like:
                </p>

                <pre class="line-numbers"><code class="language-php">&lt;?php
    class UserController extends SimpleControl
    {
        public function loginAction()
        {

        }
    }
?&gt;</code></pre>

            <p>
                After the loginAction() execution view located inside Views/User/login.phtml is executed thus completing the routing cycle.
            </p>

            <p>
               In case of missing controller or action name inside the requested url, SimpleMVC sets them to index hence calling IndexController and/or indexAction().
            </p>
            </div>

            <div id="errors-handling" class="subgroup">
                <h3>Errors handling</h3>
                <p>
                    Requests resulting in missing controller or action are being automatically re-routed to the ErrorController and errorAction with 404 HTTP code being returned hence their importance during the initial directory setup structure <a href="#errors-handler">described above</a>.
                </p>
            </div>
    
</section>


<section id="components" class="group">
            <h2>Components</h2>
            <p>SimpleMVC contains all components needed to setup a complete MVC application.</p>

            <div id="controllers" class="subgroup">
                <h3>Controllers</h3>
                <p>
                   Controllers are responsible for arbitering the application flow. They are responsible for application's logic - you can look at them as a proxy between your models and application views.
                </p>
                <p>
                    Each controller will have a number of methods corresponding to possible actions - all suffixed with a word Action. Actions are a glue between controllers and views and can pass any data to a view.
                </p>
            </div>

            <div id="actions" class="subgroup">
                <h3>Actions</h3>

                 <p>
                   Actions are methods found inside each controller. They can request data from models, set and update them and then send required data to a view for the final processing.
                </p>
                <p>
                   Actions are a glue between controllers and views and can pass any data to a view by using the following property:
                </p>

                <pre><code class="language-php">$this->_view</code></pre>

                <p>
                    So to pass a username into a view you can use the following code:
                </p>

                <pre><code class="language-php">$this->_view->username = "Foo";</code></pre>

                <p>
                    $this->_view can be extened with any property which in returned can then be access by the view.
                </p>
            </div>

            <div id="views" class="subgroup">
                <h3>Views</h3>

                <p>Views are responsible for the presentation layer. They can access data provided to them by controller actions and present them to a user.</p>

                <p>So to use an example of an action setting a username for the view</p>

                <pre><code class="language-php">$this->_view->username = "Foo";</code></pre>

                <p>View can display the above set variable by simply echoing $this->username property:</p>

                <pre><code class="language-php">echo $this->username; //will result in displaying Foo.</code></pre>
                <p>
                    Views can only access controller's properties explecitly set for the inside the action under $this->_view, any other variables are not visable to views.
                </p>
            </div>

            <div id="models" class="subgroup">
                <h3>Models</h3>

                <p>Models are responsible for the business logic. They can interact with databases, files etc.</p>

                <p>
                    To define a model you just need to create a simple class as below with the name of your choice followed by word Model and saved it under app/application/models folder inside the file with the same name as the class. 
                </p>
                <p>
                In the example below we are using name <b>Foo</b> for our model hence after the addition of affix - Model - the file name would be FooModel.php
                </p>

                <pre class="line-numbers"><code class="language-php">&lt;?php
    class FooModel
    {

    }
?&gt;</code></pre>

                <p>Models can be access inside the controller's actions by using the following command:</p>

                <pre class="line-numbers"><code class="language-php">//just a model name - Foo, no need for affix - Model/FooModel - here
$myModel = SimpleModel::getInstance('Foo'); </code></pre>

                <p>Models can have any methods you wish as well as they can be extended by any other classes.</p>

            </div>

            </section>

</div>


  <div class="col-sm-3">
  	
  	 <!--Nav Bar -->
        <nav class="bs-docs-sidebar" data-spy="affix" data-offset-top="160">
            <ul id="sidebar" class="nav nav-stacked">
                <li>
                    <a target="_self" href="#introduction">Introduction</a>
                    <ul class="nav nav-stacked">
                        <li><a target="_self" href="#requirements">Requirements</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#setup" target="_self">Setup</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#directory">Directory structure</a></li>
                        <li><a href="#bootstrap">Bootstrapping</a></li>
                        <li><a href="#index-handler">Index handler</a></li>
                        <li><a href="#errors-handler">Errors handler</a></li>
                        <li><a href="#web-server-config">Web server config</a></li>
                    </ul>
                </li>
                 <li>
                    <a href="#routing" target="_self">Routing</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#forwarding">Forwarding</a></li>
                        <li><a href="#errors-handling">Errors handling</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#components" target="_self">Components</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#controllers">Controllers</a></li>
                        <li><a href="#actions">Actions</a></li>
                        <li><a href="#views">Views</a></li>
                        <li><a href="#models">Models</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#namespacing" target="_self">Namespacing</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#ns-controllers">Controllers</a></li>
                        <li><a href="#ns-views">Views</a></li>
                        <li><a href="#ns-models">Models</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

  </div>
</div></div>

<footer>
Code licensed under <a href="https://github.com/getsimpletools/simpletools/blob/master/LICENSE">BSD</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.<br />
Powered by <a href="http://jekyllrb.com/">Jekyll</a>, hosted on <a href="https://pages.github.com/">Github Pages</a>.
</footer>
</body>
</html>